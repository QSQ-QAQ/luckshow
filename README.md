# å›¾ç‰‡å±•ç¤ºç®¡ç†ç³»ç»Ÿ

## âœ… é¡¹ç›®æ¦‚è¿°

åŸºäº Next.js 16 + React 19 çš„å›¾ç‰‡å±•ç¤ºç®¡ç†ç³»ç»Ÿï¼Œä½¿ç”¨ **Coze Coding PostgreSQL æ•°æ®åº“** å­˜å‚¨æ•°æ®ï¼Œæ”¯æŒåˆ†ç±»ç­›é€‰ã€æœç´¢ã€æ’åºå’Œçƒ­åº¦ç»Ÿè®¡åŠŸèƒ½ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pnpm install
```

### 2. åˆ›å»ºæ•°æ®åº“è¡¨

```bash
pnpm db:push
```

### 3. å¯¼å…¥åˆå§‹æ•°æ®

```bash
pnpm db:init
```

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
pnpm dev
```

è®¿é—®ï¼š`http://localhost:5000`

---

## ğŸ“¦ æŠ€æœ¯æ ˆ

- **æ¡†æ¶ï¼š** Next.js 16.1.1 (App Router)
- **åº“ï¼š** React 19.2.3
- **è¯­è¨€ï¼š** TypeScript 5
- **æ ·å¼ï¼š** Tailwind CSS 4
- **ç»„ä»¶ï¼š** shadcn/ui
- **æ•°æ®åº“ï¼š** Coze Coding PostgreSQL
- **ORMï¼š** Drizzle ORM
- **åŒ…ç®¡ç†ï¼š** pnpm

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                      # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ admin/                # ç®¡ç†åå°
â”‚   â”‚   â”œâ”€â”€ api/                  # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ page.tsx              # é¦–é¡µ
â”‚   â”‚   â””â”€â”€ layout.tsx            # å¸ƒå±€
â”‚   â”œâ”€â”€ components/               # React ç»„ä»¶
â”‚   â”œâ”€â”€ lib/                      # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ storage/database/         # æ•°æ®åº“
â”œâ”€â”€ public/images/                # å›¾ç‰‡æ–‡ä»¶
â”œâ”€â”€ scripts/backup/               # å¤‡ä»½æ–‡ä»¶
â””â”€â”€ .coze                         # Coze é…ç½®
```

---

## ğŸ—„ï¸ æ•°æ®åº“

è¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹ [DATABASE.md](./DATABASE.md)

### å¿«é€Ÿå‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `pnpm db:push` | åˆ›å»ºæ•°æ®åº“è¡¨ |
| `pnpm db:init` | å¯¼å…¥åˆå§‹æ•°æ® |
| `pnpm db:studio` | æ‰“å¼€ Drizzle Studio |

### è¡¨ç»“æ„

- **gallery_config** - é…ç½®è¡¨
- **image_heat** - çƒ­åº¦è¡¨

è¯¦è§ [DATABASE.md](./DATABASE.md)

---

## ğŸ”§ å¯ç”¨è„šæœ¬

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `pnpm dev` | å¯åŠ¨å¼€å‘æœåŠ¡å™¨ |
| `pnpm build` | æ„å»ºç”Ÿäº§ç‰ˆæœ¬ |
| `pnpm start` | å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨ |
| `pnpm db:push` | åˆ›å»ºæ•°æ®åº“è¡¨ |
| `pnpm db:init` | å¯¼å…¥åˆå§‹æ•°æ® |
| `pnpm db:studio` | æ‰“å¼€ Drizzle Studio |
| `pnpm lint` | è¿è¡Œ ESLint |
| `pnpm ts-check` | TypeScript ç±»å‹æ£€æŸ¥ |

---

## ğŸ“š API æ–‡æ¡£

| è·¯ç”± | è¯´æ˜ |
|------|------|
| `GET /api/gallery-data` | è·å–é…ç½®å’Œæ•°æ® |
| `POST /api/gallery-config` | ä¿å­˜é…ç½® |
| `POST /api/gallery/heat` | å¢åŠ çƒ­åº¦ |

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### é¦–é¡µ
- âœ… å±•ç¤ºæ‰€æœ‰å›¾ç‰‡
- âœ… åˆ†ç±»ç­›é€‰
- âœ… æœç´¢åŠŸèƒ½
- âœ… æ’åºåŠŸèƒ½ï¼ˆæ—¶é—´ã€çƒ­åº¦ï¼‰
- âœ… ç‚¹å‡»æŸ¥çœ‹å¤§å›¾
- âœ… çƒ­åº¦ç»Ÿè®¡

### ç®¡ç†åå°
- âœ… åˆ†ç±»ç®¡ç†
- âœ… å›¾ç‰‡ç®¡ç†
- âœ… å®æ—¶ä¿å­˜åˆ°æ•°æ®åº“
- âœ… æ•°æ®æŒä¹…åŒ–

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [DATABASE.md](./DATABASE.md) | æ•°æ®åº“ä½¿ç”¨æŒ‡å— |
| [CLEANUP_SUMMARY.md](./CLEANUP_SUMMARY.md) | é¡¹ç›®æ¸…ç†æ€»ç»“ |
| [scripts/backup/README.md](./scripts/backup/README.md) | å¤‡ä»½è¯´æ˜ |

---

## âš ï¸ é‡è¦è¯´æ˜

### æ•°æ®åº“

- âœ… ä½¿ç”¨ Coze Coding PostgreSQL æ•°æ®åº“
- âŒ ä¸å†ä½¿ç”¨ JSON æ–‡ä»¶å­˜å‚¨
- âœ… æ•°æ®æŒä¹…åŒ–ä¿å­˜
- âœ… éƒ¨ç½²åæ­£å¸¸å·¥ä½œ

### é¦–æ¬¡éƒ¨ç½²

å¿…é¡»æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
```bash
pnpm db:push   # åˆ›å»ºæ•°æ®åº“è¡¨
pnpm db:init   # å¯¼å…¥åˆå§‹æ•°æ®
```

### æ•°æ®æ¢å¤

```bash
pnpm db:init   # ä»å¤‡ä»½æ–‡ä»¶æ¢å¤æ•°æ®
```

---

## ğŸ¯ å¼€å‘è§„èŒƒ

### åŒ…ç®¡ç†å™¨

**ä»…å…è®¸ä½¿ç”¨ pnpm**ï¼Œç¦æ­¢ä½¿ç”¨ npm æˆ– yarnã€‚

```bash
âœ… pnpm install
âœ… pnpm add <package>
âŒ npm install
âŒ yarn install
```

### æäº¤è§„èŒƒ

éµå¾ª Conventional Commitsï¼š
- `feat:` æ–°åŠŸèƒ½
- `fix:` ä¿®å¤é—®é¢˜
- `refactor:` é‡æ„
- `docs:` æ–‡æ¡£æ›´æ–°
- `chore:` å…¶ä»–ä¿®æ”¹

---

## ğŸ”’ ç¯å¢ƒè¦æ±‚

- Node.js 24+
- pnpm 9.0.0+
- Coze Coding ç¯å¢ƒ

---

## ğŸ“ è®¸å¯è¯

MIT
